# DRL-TSBC 版本对比表

## 完整版本历史

| 版本 | 奖励函数 | Gamma | Tmin | Tmax | 发车次数 | 上行等待 | 下行等待 | 比率 | 状态 |
|------|---------|-------|------|------|---------|---------|---------|------|------|
| v2.0 | improved | - | 3 | 12 | 72次 | 6.85分钟 | 19.56分钟 | 2.85 | ❌ Q值失败 |
| v2.1 | 论文公式 | - | 3 | 12 | 0次 | - | - | - | ❌ 不发车 |
| v2.2 | 论文+gamma | 0.15 | 3 | 12 | 102次 | 5.06分钟 | 7.08分钟 | 1.40 | ⚠️ 过多 |
| v2.3 | 论文+gamma | 0.08 | 3 | 12 | 93次 | 5.23分钟 | 7.94分钟 | 1.52 | ⚠️ 过多 |
| v2.4 | 论文+gamma | 0.06 | 3 | 12 | 93次 | 5.00分钟 | 8.30分钟 | 1.66 | ⚠️ 无变化 |
| v2.5 | 论文+gamma | 0.04 | 3 | 12 | 93次 | 5.20分钟 | 8.19分钟 | 1.57 | ⚠️ 无变化 |
| v2.6 | 纯论文 | 无 | 3 | 12 | 90次 | 5.36分钟 | 8.51分钟 | 1.59 | ✅ 有效 |
| v2.7 | 纯论文 | 无 | 5 | 20 | ?次 | ?分钟 | ?分钟 | ? | 🔄 训练中 |

## 论文目标

| 指标 | 论文值 |
|------|--------|
| 发车次数 | 73次 |
| 上行等待 | 3.7分钟 |
| 下行等待 | 3.8分钟 |
| 比率 | 1.03 |
| 滞留乘客 | 0人 |

## 关键发现

### 1. Gamma调优无效（v2.3-v2.5）
- Gamma从0.08降到0.04
- 发车次数始终卡在93次
- 说明gamma不是控制发车次数的关键

### 2. 纯论文公式有效（v2.6）
- 移除gamma后，发车次数降到90次
- 证明额外的gamma项干扰了原始机制

### 3. Tmax是关键参数（v2.7测试中）
- Tmax=12 → 90次发车
- Tmax=20 → ?次发车（理论上应该更少）

## 最佳版本对比

### v2.6（当前最佳）
**优点**：
- ✅ 纯论文公式，无额外项
- ✅ 发车次数90次（接近73）
- ✅ 等待时间合理
- ✅ 无滞留乘客

**缺点**：
- ⚠️ 发车次数仍高17次
- ⚠️ 下行等待时间高2.2倍

### v2.7（期待中）
**目标**：
- 🎯 发车次数：70-76次
- 🎯 上行等待：< 5.5分钟
- 🎯 下行等待：< 10分钟

**假设**：
- Tmax=20是论文的实际值
- 更大的Tmax允许更少的发车

## 与论文的差距分析

### 发车次数
- 论文：73次
- v2.6：90次
- 差距：+17次（+23%）

### 等待时间
- 上行：5.36 vs 3.7（+45%）
- 下行：8.51 vs 3.8（+124%）

### 可能原因
1. Tmax参数不同
2. 数据处理方式不同
3. 环境模拟细节不同
4. 论文可能有后处理步骤

## 下一步计划

### 如果v2.7成功（70-76次）
1. ✅ 确认Tmin=5, Tmax=20
2. ✅ 更新所有文档
3. ✅ 进行最终验证
4. ✅ 撰写复现报告

### 如果v2.7仍不理想
1. 尝试Tmax=15, 18, 22
2. 检查环境模拟的其他细节
3. 考虑数据预处理差异
4. 研究论文的后处理方法

## 经验总结

1. **不要过早优化**：gamma调优走了弯路
2. **回归基础**：纯论文公式最有效
3. **参数重要性**：Tmax > gamma
4. **系统化测试**：逐个参数验证
